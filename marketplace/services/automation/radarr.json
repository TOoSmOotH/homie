{
  "id": "radarr",
  "name": "Radarr",
  "version": "5.2.6",
  "author": "Radarr Team",
  "description": "Connect to Radarr for movie collection management and automation",
  "longDescription": "Integrate with your Radarr instance to monitor downloads, manage your movie library, search for releases, and control your automation from Homie.",
  "category": "automation",
  "tags": ["movies", "automation", "download", "usenet", "torrent", "media-management"],
  "icon": "ðŸŽ¬",
  "homepage": "https://radarr.video",
  "documentation": "https://wiki.servarr.com/radarr",
  "features": [
    {
      "id": "movie_management",
      "name": "Movie Library",
      "description": "Manage your movie collection",
      "icon": "ðŸŽ¬",
      "capabilities": [
        "View all movies",
        "Add new movies",
        "Edit movie settings",
        "Delete movies",
        "Search for releases"
      ]
    },
    {
      "id": "download_queue",
      "name": "Download Queue",
      "description": "Monitor and manage downloads",
      "icon": "ðŸ“¥",
      "capabilities": [
        "View active downloads",
        "Monitor progress",
        "Remove from queue",
        "Force re-download",
        "Manual import"
      ]
    },
    {
      "id": "calendar",
      "name": "Release Calendar",
      "description": "Track upcoming movie releases",
      "icon": "ðŸ“…",
      "capabilities": [
        "View release schedule",
        "Filter by status",
        "See digital/physical dates",
        "Auto-download setup"
      ]
    },
    {
      "id": "indexer_management",
      "name": "Indexer Stats",
      "description": "Monitor indexer performance",
      "icon": "ðŸ”",
      "capabilities": [
        "View indexer status",
        "Success/failure rates",
        "Response times",
        "Test connections"
      ]
    },
    {
      "id": "quality_profiles",
      "name": "Quality Management",
      "description": "Control download quality settings",
      "icon": "ðŸŽ¯",
      "capabilities": [
        "View quality profiles",
        "Preferred qualities",
        "Size limits",
        "Upgrade policies"
      ]
    },
    {
      "id": "system_health",
      "name": "System Health",
      "description": "Monitor Radarr system status",
      "icon": "â¤ï¸",
      "capabilities": [
        "Health checks",
        "Disk space",
        "Update status",
        "Log monitoring"
      ]
    }
  ],
  "connection": {
    "type": "api",
    "auth": "apikey",
    "fields": [
      {
        "key": "url",
        "label": "Radarr URL",
        "type": "url",
        "required": true,
        "placeholder": "http://192.168.1.100:7878",
        "description": "Full URL to your Radarr instance"
      },
      {
        "key": "api_key",
        "label": "API Key",
        "type": "password",
        "required": true,
        "description": "Found in Settings > General > Security"
      }
    ],
    "testEndpoint": {
      "path": "/api/v3/system/status",
      "method": "GET",
      "headers": {
        "X-Api-Key": "{api_key}"
      },
      "expectedStatus": 200,
      "successIndicator": "version"
    }
  },
  "api": {
    "baseUrl": "{url}",
    "headers": {
      "X-Api-Key": "{api_key}"
    },
    "endpoints": {
      "queue": {
        "path": "/api/v3/queue",
        "method": "GET",
        "refresh": 10000,
        "transform": "response.records"
      },
      "calendar": {
        "path": "/api/v3/calendar",
        "method": "GET",
        "params": {
          "start": "{startDate}",
          "end": "{endDate}"
        },
        "refresh": 3600000
      },
      "missing": {
        "path": "/api/v3/wanted/missing",
        "method": "GET",
        "params": {
          "pageSize": 1
        },
        "transform": "response.totalRecords",
        "refresh": 60000
      },
      "status": {
        "path": "/api/v3/system/status",
        "method": "GET",
        "refresh": 30000
      },
      "movies": {
        "path": "/api/v3/movie",
        "method": "GET",
        "cache": 300000
      },
      "health": {
        "path": "/api/v3/health",
        "method": "GET",
        "refresh": 60000
      }
    }
  },
  "quickActions": [
    {
      "id": "search_missing",
      "name": "Search Missing Movies",
      "icon": "ðŸ”",
      "confirm": true,
      "api": {
        "endpoint": "/api/v3/command",
        "method": "POST",
        "body": {"name": "MissingMoviesSearch"}
      }
    },
    {
      "id": "rss_sync", 
      "name": "RSS Sync",
      "icon": "ðŸ”„",
      "confirm": false,
      "api": {
        "endpoint": "/api/v3/command",
        "method": "POST",
        "body": {"name": "RssSync"}
      }
    },
    {
      "id": "backup",
      "name": "Backup Database",
      "icon": "ðŸ’¾",
      "confirm": true,
      "api": {
        "endpoint": "/api/v3/command",
        "method": "POST",
        "body": {"name": "Backup"}
      }
    }
  ],
  "widgets": [
    {
      "id": "download_queue",
      "name": "Download Queue",
      "type": "list",
      "icon": "ðŸ“¥",
      "size": "medium",
      "dataSource": "queue",
      "display": {
        "itemTemplate": {
          "title": "{title}",
          "subtitle": "{status} - {sizeleft|filesize} left",
          "progress": "{progress}"
        },
        "emptyMessage": "No active downloads",
        "maxItems": 5
      }
    },
    {
      "id": "upcoming_movies",
      "name": "Coming Soon",
      "type": "list",
      "icon": "ðŸ“…",
      "size": "large",
      "dataSource": "calendar",
      "display": {
        "itemTemplate": {
          "title": "{title} ({year})",
          "subtitle": "{inCinemas|date}"
        },
        "emptyMessage": "No upcoming movies",
        "maxItems": 10
      }
    },
    {
      "id": "missing_counter",
      "name": "Missing Movies",
      "type": "stat",
      "icon": "ðŸŽ¬",
      "size": "small",
      "dataSource": "missing",
      "display": {
        "value": "{data}",
        "label": "Missing Movies",
        "color": "warning"
      }
    },
    {
      "id": "system_status",
      "name": "System Status",
      "type": "info",
      "icon": "â„¹ï¸",
      "size": "small",
      "dataSource": ["status", "movies", "health"],
      "display": {
        "fields": [
          { "label": "Version", "value": "{status.version}" },
          { "label": "Movies", "value": "{movies.length}" },
          { "label": "Health", "value": "{health|healthStatus}" }
        ]
      }
    }
  ],
  "transformers": {
    "filesize": "function(bytes) { return (bytes / 1024 / 1024).toFixed(2) + ' MB'; }",
    "date": "function(dateStr) { return new Date(dateStr).toLocaleDateString(); }",
    "healthStatus": "function(health) { return health && health.length > 0 ? health.length + ' issues' : 'Healthy'; }"
  },
  "settings": {
    "sections": [
      {
        "id": "display",
        "name": "Display Settings",
        "icon": "ðŸŽ¨",
        "fields": [
          {
            "key": "show_queue",
            "label": "Show Download Queue",
            "type": "boolean",
            "default": true,
            "description": "Display active downloads on the dashboard"
          },
          {
            "key": "show_upcoming",
            "label": "Show Upcoming Movies",
            "type": "boolean",
            "default": true,
            "description": "Display upcoming movies calendar"
          },
          {
            "key": "show_missing",
            "label": "Show Missing Movies",
            "type": "boolean",
            "default": true,
            "description": "Display count of missing movies"
          },
          {
            "key": "max_items",
            "label": "Maximum Items to Display",
            "type": "number",
            "default": 10,
            "min": 5,
            "max": 50,
            "description": "Maximum number of items to show in lists"
          }
        ]
      },
      {
        "id": "monitoring",
        "name": "Monitoring",
        "icon": "ðŸ“Š",
        "fields": [
          {
            "key": "enable_notifications",
            "label": "Enable Notifications",
            "type": "boolean",
            "default": false,
            "description": "Send notifications for downloads and errors"
          },
          {
            "key": "check_health",
            "label": "Monitor System Health",
            "type": "boolean",
            "default": true,
            "description": "Check for Radarr system health issues"
          },
          {
            "key": "sync_interval",
            "label": "Sync Interval (minutes)",
            "type": "number",
            "default": 30,
            "min": 5,
            "max": 120,
            "description": "How often to sync with Radarr"
          }
        ]
      },
      {
        "id": "automation",
        "name": "Automation",
        "icon": "ðŸ¤–",
        "fields": [
          {
            "key": "auto_search",
            "label": "Auto-Search for Missing",
            "type": "boolean",
            "default": false,
            "description": "Automatically search for missing movies"
          },
          {
            "key": "auto_search_interval",
            "label": "Auto-Search Interval (hours)",
            "type": "number",
            "default": 24,
            "min": 1,
            "max": 168,
            "description": "Hours between automatic searches",
            "depends_on": "auto_search",
            "show_if": true
          },
          {
            "key": "quality_profile",
            "label": "Default Quality Profile",
            "type": "select",
            "options": "dynamic",
            "description": "Quality profile for new movies"
          }
        ]
      }
    ]
  }
}